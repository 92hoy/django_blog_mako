<%inherit file="../base/base.html"/>

<%block name="css">
<link rel="stylesheet" href="/static/board/board.css">

</%block>

<%block name="containor">
<div class="board_container">

    <div class="board-header-button">
        <button type="button" id="add_btn"  class="btn btn-primary btn-submit">게시글 작성</button>
        <button type="button" id="btn_add" onclick="btn_add()" class="btn btn-warning btn-submit">게시글 작성</button>
        <button type="button" id="add_cancel" class="btn btn-danger btn-submit">작성 취소</button>
    </div>

    <div class="board-box-input" id="add_board">
        <div class="board-title">
            <input type="text" id="title_input" class="title-input" placeholder="게시글 제목" >
        </div>
        <div class="board-content">
            <textarea id="content_input" rows="3" cols="100" class="content-input" placeholder="내용을 적어주세요."></textarea>
        </div>
    </div>

    <div class="board-box">
        <div class="board-title">
            <th>dddd</th>
        </div>
        <div class="board-content">
            <th>dkdkdkdkdkdkdkd</th>
        </div>
    </div>
    <div class="board-box">
        <div class="board-title">게시글 제목</div>
        <div class="board-content"> 왜 색상은 어울리지 않는것인가 .</div>
    </div>
    <div class="board-box">
        <div class="board-title">게시글 제목</div>
        <div class="board-content"> 왜 색상은 어울리지 않는것인가 .</div>
    </div>
    <div class="board-box">
        <div class="board-title">게시글 제목</div>
        <div class="board-content"> 왜 색상은 어울리지 않는것인가 .</div>
    </div>

</div>

</%block>

<%block name="scriptDown">
<script>
    $(document).ready(function() {
        console.log("ready");
        $('#add_board').hide()
        $('#add_cancel').hide()
        $('#btn_add').hide()

        $('#add_cancel').click(function(){
            $('#add_board').hide()
            $('#add_cancel').hide()
            $('#btn_add').hide()
            $('#add_btn').show()
            $('#title_input').val('')
            $('#content_input').val('')
        })
        $('#add_btn').click(function(){
            $('#add_board').show()
            $('#add_cancel').show()
            $('#btn_add').show()
            $('#add_btn').hide()
        })
    })

    function btn_add(){
        var title_input = $('#title_input').val()
        var content_input = $('#content_input').val()
        var lock=0;
        console.log("title_input = ",title_input,"content_input = ",content_input);


        if (title_input == '') {
            swal("Error","제목을 입력해 주세요", "warning");
            lock = 1;
        }
        else if(content_input == '') {
            swal("Error","내용을 입력해 주세요", "warning");
            lock = 1;
        }

        if(lock ==0){
            $.ajax({
                type: "POST",
                url: "/board/board_add",
                data: {
                    'csrfmiddlewaretoken': '${csrf_token}',
                    title_input: title_input,
                    content_input: content_input,
                },
                success: function (data) {
                    console.log(data);
                    if (data.return == 'success') {
                        swal({
                            title : "Success",
                            text : "등록 완료",
                            type : "success"
                        }).then(function(){
                            location.reload()
                        });
                    }
                    else if (data.return != 'success') {
                        swal({
                            title: "Warning",
                            text: "등록 실패",
                            icon: "warning",
                            buttons: true,
                            dangerMode: false,
                        }).then(function(willDelete) {
                            if (willDelete) {
                                return
                            } else {
                                return
                            }
                        });
                    }
                },
            });
        }
    }


</script>
</%block>
